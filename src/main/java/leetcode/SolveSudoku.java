package leetcode;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

/**
 * @author dengxinlong
 * @date 2021/8/26 16:37
 * //ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚ 
 * //
 * // æ•°ç‹¬çš„è§£æ³•éœ€ éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š 
 * //
 * // 
 * // æ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ 
 * // æ•°å­— 1-9 åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ 
 * // æ•°å­— 1-9 åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ 3x3 å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰ 
 * // 
 * //
 * // æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨ '.' è¡¨ç¤ºã€‚ 
 * //
 * // 
 * //
 * // 
 * // 
 * // 
 * // ç¤ºä¾‹ï¼š 
 * //
 * // 
 * //è¾“å…¥ï¼šboard = [["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5","."
 * //,".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".","."
 * //,"3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"
 * //],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],["
 * //.",".",".",".","8",".",".","7","9"]]
 * //è¾“å‡ºï¼š[["5","3","4","6","7","8","9","1","2"],["6","7","2","1","9","5","3","4","8"
 * //],["1","9","8","3","4","2","5","6","7"],["8","5","9","7","6","1","4","2","3"],["
 * //4","2","6","8","5","3","7","9","1"],["7","1","3","9","2","4","8","5","6"],["9","
 * //6","1","5","3","7","2","8","4"],["2","8","7","4","1","9","6","3","5"],["3","4","
 * //5","2","8","6","1","7","9"]]
 * //è§£é‡Šï¼šè¾“å…¥çš„æ•°ç‹¬å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š
 * //
 * //
 * // 
 * //
 * // 
 * //
 * // æç¤ºï¼š 
 * //
 * // 
 * // board.length == 9 
 * // board[i].length == 9 
 * // board[i][j] æ˜¯ä¸€ä½æ•°å­—æˆ–è€… '.' 
 * // é¢˜ç›®æ•°æ® ä¿è¯ è¾“å…¥æ•°ç‹¬ä»…æœ‰ä¸€ä¸ªè§£ 
 * // 
 * // 
 * // 
 * // 
 * // Related Topics æ•°ç»„ å›æº¯ çŸ©é˜µ 
 * // ğŸ‘ 917 ğŸ‘ 0
 */
public class SolveSudoku {
    public static void main(String[] args) {
        char[][] board = {
                {'5','3','.','.','7','.','.','.','.'},
                {'6','.','.','1','9','5','.','.','.'},
                {'.','9','8','.','.','.','.','6','.'},
                {'8','.','.','.','6','.','.','.','3'},
                {'4','.','.','8','.','3','.','.','1'},
                {'7','.','.','.','2','.','.','.','6'},
                {'.','6','.','.','.','.','2','8','.'},
                {'.','.','.','4','1','9','.','.','5'},
                {'.','.','.','.','8','.','.','7','9'}};
        solveSudoku(board);
        for(int i=0;i<board.length;i++){
            for(int j=0;j<board[i].length;j++){
                System.out.print(board[i][j]+",");
            }
            System.out.println();
        }
    }
    public static void solveSudoku(char[][] board) {
        // ä¸‰ä¸ªå¸ƒå°”æ•°ç»„ è¡¨æ˜ è¡Œ, åˆ—, è¿˜æœ‰ 3*3 çš„æ–¹æ ¼çš„æ•°å­—æ˜¯å¦è¢«ä½¿ç”¨è¿‡
        boolean[][] rowUsed = new boolean[9][10];
        boolean[][] colUsed = new boolean[9][10];
        boolean[][][] boxUsed = new boolean[3][3][10];
        // åˆå§‹åŒ–
        for(int row = 0; row < board.length; row++){
            for(int col = 0; col < board[0].length; col++) {
                int num = board[row][col] - '0';
                if(1 <= num && num <= 9){
                    rowUsed[row][num] = true;
                    colUsed[col][num] = true;
                    boxUsed[row/3][col/3][num] = true;
                }
            }
        }
        // é€’å½’å°è¯•å¡«å……æ•°ç»„
        recusiveSolveSudoku(board, rowUsed, colUsed, boxUsed, 0, 0);
    }

    /**
     * å›æº¯ç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šä»ä¸€æ¡è·¯å¾€å‰èµ°ï¼Œèƒ½è¿›åˆ™è¿›ï¼Œä¸èƒ½è¿›åˆ™é€€å›æ¥ï¼Œæ¢ä¸€æ¡è·¯å†è¯•
     * å›æº¯ç®—æ³•å®é™…ä¸Šä¸€ä¸ªç±»ä¼¼æšä¸¾çš„æœç´¢å°è¯•è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯åœ¨æœç´¢å°è¯•è¿‡ç¨‹ä¸­å¯»æ‰¾é—®é¢˜çš„è§£ï¼Œå½“å‘ç°å·²ä¸æ»¡è¶³æ±‚è§£æ¡ä»¶æ—¶ï¼Œå°±â€œå›æº¯â€è¿”å›ï¼Œå°è¯•åˆ«çš„è·¯å¾„ã€‚
     * å›æº¯æ³•æ˜¯ä¸€ç§é€‰ä¼˜æœç´¢æ³•ï¼ŒæŒ‰é€‰ä¼˜æ¡ä»¶å‘å‰æœç´¢ï¼Œä»¥è¾¾åˆ°ç›®æ ‡ã€‚ä½†å½“æ¢ç´¢åˆ°æŸä¸€æ­¥æ—¶ï¼Œå‘ç°åŸå…ˆé€‰æ‹©å¹¶ä¸ä¼˜æˆ–è¾¾ä¸åˆ°ç›®æ ‡ï¼Œå°±é€€å›ä¸€æ­¥é‡æ–°é€‰æ‹©ï¼Œ
     * è¿™ç§èµ°ä¸é€šå°±é€€å›å†èµ°çš„æŠ€æœ¯ä¸ºå›æº¯æ³•ï¼Œè€Œæ»¡è¶³å›æº¯æ¡ä»¶çš„æŸä¸ªçŠ¶æ€çš„ç‚¹ç§°ä¸ºâ€œå›æº¯ç‚¹â€ã€‚
     * è®¸å¤šå¤æ‚çš„ï¼Œè§„æ¨¡è¾ƒå¤§çš„é—®é¢˜éƒ½å¯ä»¥ä½¿ç”¨å›æº¯æ³•ï¼Œæœ‰â€œé€šç”¨è§£é¢˜æ–¹æ³•â€çš„ç¾ç§°ã€‚
     * @param board
     * @param rowUsed
     * @param colUsed
     * @param boxUsed
     * @param row
     * @param col
     * @return
     */
    private static boolean recusiveSolveSudoku(char[][]board, boolean[][]rowUsed, boolean[][]colUsed, boolean[][][]boxUsed, int row, int col){
        // è¾¹ç•Œæ ¡éªŒ, å¦‚æœå·²ç»å¡«å……å®Œæˆ, è¿”å›true, è¡¨ç¤ºä¸€åˆ‡ç»“æŸ
        if(col == board[0].length){
            col = 0;
            row++;
            if(row == board.length){
                return true;
            }
        }
        // æ˜¯ç©ºåˆ™å°è¯•å¡«å……, å¦åˆ™è·³è¿‡ç»§ç»­å°è¯•å¡«å……ä¸‹ä¸€ä¸ªä½ç½®
        if(board[row][col] == '.') {
            // å°è¯•å¡«å……1~9
            for(int num = 1; num <= 9; num++){
                boolean canUsed = !(rowUsed[row][num] || colUsed[col][num] || boxUsed[row/3][col/3][num]);
                if(canUsed){
                    rowUsed[row][num] = true;
                    colUsed[col][num] = true;
                    boxUsed[row/3][col/3][num] = true;

                    board[row][col] = (char)('0' + num);
                    if(recusiveSolveSudoku(board, rowUsed, colUsed, boxUsed, row, col + 1)){
                        return true;
                    }
                    board[row][col] = '.';

                    rowUsed[row][num] = false;
                    colUsed[col][num] = false;
                    boxUsed[row/3][col/3][num] = false;
                }
            }
        } else {
            return recusiveSolveSudoku(board, rowUsed, colUsed, boxUsed, row, col + 1);
        }
        return false;
    }
    
}
